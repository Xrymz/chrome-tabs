<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>IFrames | Chrome Tabz Test</title>

  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    .chrome-tab-toolz {
      top: 10px;
      right: 15px;
      position: absolute;
    }
  </style>

  <link rel="stylesheet" href="../../../src/css/base.min.css" />
  <link rel="stylesheet" href="../../../src/css/dark.min.css" />
</head>

<body>
  <div class="chrome-tabz"></div>

  <div class="chrome-tab-toolz">
    <button class="-add-tab">Add Tab</button>
    <button class="-remove-tab">Remove Tab</button>
    <button class="-toggle-dark-theme">Toggle Theme</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="../../../dists/js/bundle.min.js"></script>

  <script>
    // jshint esversion: 6

    jQuery(document).ready($ => {

      let settings = {
        minWidth: 45,
        maxWidth: 243,
        rightMargin: 300,
        overlapDistance: 14,

        viewz: 'iframes', // or `webviews`.
        // `webviews` = Electron compatibility.
        // Or leave empty to disable viewz entirely.

        allowDragNDrop: true,
        allowDoubleClick: true,
        initial: [{ url: 'https://jaswsinc.github.io/chrome-tabz/README.md' }],

        defaultProps: {
          title: 'New Tab',
          favicon: '../../../src/images/default-favicon.svg',
          url: 'https://duckduckgo.com/?kae=b&kak=-1&kao=-1&k1=-1&kt=p&kj=f5f5f5&ka=p&kf=1&kam=google-maps&km=l&ko=1',

          unknownUrlTitle: 'Web Page',
          loadingFavicon: '../../../src/images/loading-favicon.svg',

          viewAttrs: {}
        },
        debug: 3
      };

      $('.chrome-tabz').chromeTabz(settings).each((i, obj) => {

        let $chromeTabz = $(obj); // jQuery & class.
        $chromeTabz._ = $chromeTabz.data('chromeTabz');

        let $tabz = $chromeTabz._.addTabz([
          { url: '../../../demos/viewz/assets/frames/1.html' },
          { url: '../../../demos/viewz/assets/frames/2.html' },
          { url: '../../../demos/viewz/assets/frames/3.html' },
          { url: '../../../demos/viewz/assets/frames/4.html' },
          { url: '../../../demos/viewz/assets/frames/5.html' },
          { url: '../../../demos/viewz/assets/frames/6.html' },
          { url: '../../../demos/viewz/assets/frames/7.html' },
          { url: '../../../demos/viewz/assets/frames/8.html' },
          { url: '../../../demos/viewz/assets/frames/9.html' },
          {
            title: 'DuckDuckGo.com',
            favicon: 'https://duckduckgo.com/favicon.ico',
            url: 'https://duckduckgo.com/?kae=b&kak=-1&kao=-1&k1=-1&kt=p&kj=f5f5f5&ka=p&kf=1&kam=google-maps&km=l&ko=1&kn=1'
          }, {
            title: 'ixQuick.com',
            url: 'https://www.ixquick.com/',
            favicon: 'https://www.ixquick.com/favicon.ico'
          }, {
            title: 'Teoma.com',
            url: 'https://www.teoma.com/',
            favicon: 'https://www.teoma.com/favicon.ico',

            viewAttrs: {
              style: 'background:#fff'
            }
          }
        ]);
        $chromeTabz._.setCurrentTab($tabz.eq(1)); // `2.html` above.

        $('.chrome-tab-toolz > .-add-tab').on('click', (e) => {
          let url = prompt('URL (empty = default tab):');
          if (url !== null) $chromeTabz._.addTab(url ? { url } : {});
        });
        $('.chrome-tab-toolz > .-remove-tab').on('click', (e) => {
          $chromeTabz._.removeTab($chromeTabz._.$currentTab);
        });
        $('.chrome-tab-toolz > .-toggle-dark-theme').on('click', (e) => {
          $chromeTabz.toggleClass('-dark-theme');
        });

        if ($chromeTabz._.settings.debug >= 2) {
          $chromeTabz.on('constructed', (event, instance) => console.log('Tabs constructed.'));
          $chromeTabz.on('initialized', (event, instance) => console.log('Tabs initialized.'));
          $chromeTabz.on('destroyed', (event, instance) => console.log('Tabs destroyed.'));

          $chromeTabz.on('tabAdded', (event, tab, instance) => console.log('Tab added.', tab));
          $chromeTabz.on('tabUpdated', (event, tab, props, via, prevProps, newProps, instance) => console.log('Tab props updated.', tab, props, via, prevProps, newProps));
          $chromeTabz.on('currentTabChanged', (event, tab, instance) => console.log('Current tab changed to.', tab));

          $chromeTabz.on('tabDragStarted', (event, tab, instance) => console.log('Tab drag started.', tab));
          $chromeTabz.on('tabDragMoved', (event, tab, indexes, instance) => console.log('Tab dragged to a new location.', tab, indexes));
          $chromeTabz.on('tabDragStopped', (event, tab, newIndex, instance) => console.log('Tab drag stopped.', tab, newIndex));

          $chromeTabz.on('tabBeingRemoved', (event, tab, instance) => console.log('Tab will be removed.', tab));
          $chromeTabz.on('tabRemoved', (event, tab, instance) => console.log('Tab removed.', tab));

          if ($chromeTabz._.settings.debug >= 3 && $chromeTabz._.settings.viewz) {
            let $chromeTabViewz = $chromeTabz._.$viewz;
            $chromeTabViewz._ = $chromeTabViewz.data('chromeTabViewz');

            $chromeTabViewz.on('constructed', (event, instance) => console.log('Viewz constructed.'));
            $chromeTabViewz.on('initialized', (event, instance) => console.log('Viewz initialized.'));
            $chromeTabViewz.on('destroyed', (event, instance) => console.log('Viewz destroyed.'));

            $chromeTabViewz.on('viewIndexed', (event, view, locations, instance) => console.log('View indexed.', view, locations));
            $chromeTabViewz.on('viewAdded', (event, view, instance) => console.log('View added.', view));
            $chromeTabViewz.on('viewUpdated', (event, view, props, via, prevProps, newProps, instance) => console.log('View props updated.', view, props, via, prevProps, newProps));
            $chromeTabViewz.on('currentViewChanged', (event, view, instance) => console.log('Current view changed to.', view));

            $chromeTabViewz.on('viewBeingRemoved', (event, view, instance) => console.log('View will be removed.', view));
            $chromeTabViewz.on('viewRemoved', (event, view, instance) => console.log('View removed.', view));

            $chromeTabViewz.on('viewStartedLoading', (event, view, instance) => console.log('View started loading.', view));
            $chromeTabViewz.on('viewFaviconUpdated', (event, view, favicon, instance) => console.log('View favicon updated.', view, favicon));
            $chromeTabViewz.on('viewTitleUpdated', (event, view, title, instance) => console.log('View title updated.', view, title));
            $chromeTabViewz.on('viewStoppedLoading', (event, view, instance) => console.log('View stopped loading.', view));
          }
        }
      });
    });
  </script>

</body>

</html>
